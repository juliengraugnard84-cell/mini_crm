<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CRM{% endblock %}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <!-- Google Icons -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
        rel="stylesheet"
    >

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

<div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">

        <div class="sidebar-logo">
            <strong>CRM</strong><br>
            <small>Synergy Group</small>
        </div>

        <nav class="sidebar-nav">

            <a href="{{ url_for('dashboard') }}" class="sidebar-link">
                <span class="material-symbols-outlined">dashboard</span>
                Dashboard
            </a>

            <a href="{{ url_for('clients') }}" class="sidebar-link">
                <span class="material-symbols-outlined">groups</span>
                Clients
            </a>

            <a href="{{ url_for('chiffre_affaire') }}" class="sidebar-link">
                <span class="material-symbols-outlined">euro</span>
                Chiffre d’affaires
            </a>

            {% if current_user and current_user.role == 'admin' %}
            <a href="{{ url_for('admin_users') }}" class="sidebar-link">
                <span class="material-symbols-outlined">admin_panel_settings</span>
                Utilisateurs
            </a>
            {% endif %}

            <!-- LOGOUT -->
            <hr class="text-white-50 my-3">

            {% if current_user %}
            <a href="{{ url_for('logout') }}" class="sidebar-link text-danger">
                <span class="material-symbols-outlined">logout</span>
                Déconnexion
            </a>
            {% endif %}

        </nav>
    </aside>

    <!-- CONTENU -->
    <main class="content-wrapper">

        <!-- FLASH MESSAGES -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- CONTENU DES PAGES -->
        {% block content %}{% endblock %}

    </main>

</div>

<!-- Bootstrap JS -->
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
</script>

</body>
</html>
