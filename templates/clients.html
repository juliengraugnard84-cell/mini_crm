{% extends "base.html" %}
{% block title %}Clients{% endblock %}

{% block content %}

<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
    <h1>Clients</h1>

    <a href="{{ url_for('new_client') }}" class="btn btn-primary">
        ➕ Nouveau dossier client
    </a>
</div>

<div class="card">

    {% if clients %}

        {% for c in clients %}
        <div class="list-group-item"
             style="display:flex;justify-content:space-between;align-items:center;gap:16px;">

            <!-- Infos client -->
            <div>
                <strong>{{ c.name }}</strong><br>
                <small class="text-muted">
                    Créé le {{ c.created_at[:10] }}
                </small>
            </div>

            <!-- Statut + action -->
            <div style="display:flex;align-items:center;gap:12px;">

                {% set s = (c.status or '').lower() %}
                {% if s == 'electricite' or s == 'électricité' %}
                    <span class="badge badge-warning">Électricité</span>
                {% elif s == 'gaz' %}
                    <span class="badge badge-info">Gaz</span>
                {% else %}
                    <span class="badge badge-secondary">—</span>
                {% endif %}

                <a href="{{ url_for('client_detail', client_id=c.id) }}"
                   class="btn btn-secondary">
                    Ouvrir
                </a>
            </div>

        </div>
        {% endfor %}

    {% else %}

        <div class="empty-state">
            <strong>Aucun client</strong><br>
            Commencez par créer votre premier dossier client.
        </div>

    {% endif %}

</div>

{% endblock %}
