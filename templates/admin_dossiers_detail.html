{% extends "base.html" %}
{% block title %}Dossiers â€” {{ commercial.username }}{% endblock %}

{% block content %}
<div class="container-fluid">

    <!-- ================= PAGE HEADER ================= -->
    <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
            <h2 class="mb-0">
                ğŸ“ Dossiers du commercial : {{ commercial.username }}
            </h2>
            <small class="text-muted">
                DÃ©tail des dossiers par statut
            </small>
        </div>
        <a class="btn btn-outline-secondary" href="{{ url_for('admin_dossiers') }}">
            â† Retour
        </a>
    </div>

    <div class="row g-3">

        <!-- ================= EN COURS ================= -->
        <div class="col-12 col-lg-4">
            <div class="card h-100">
                <div class="card-header fw-bold">
                    ğŸ”µ En cours ({{ en_cours|length }})
                </div>
                <div class="card-body">
                    {% if en_cours %}
                        <ul class="list-group list-group-flush">
                            {% for c in en_cours %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('client_detail', client_id=c.id) }}">
                                        {{ c.name }}
                                    </a>
                                    <small class="text-muted">
                                        {{ format_date(c.created_at) }}
                                    </small>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-muted">
                            Aucun dossier en cours.
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- ================= GAGNÃ‰S ================= -->
        <div class="col-12 col-lg-4">
            <div class="card h-100">
                <div class="card-header fw-bold">
                    ğŸŸ¢ GagnÃ©s ({{ gagnes|length }})
                </div>
                <div class="card-body">
                    {% if gagnes %}
                        <ul class="list-group list-group-flush">
                            {% for c in gagnes %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('client_detail', client_id=c.id) }}">
                                        {{ c.name }}
                                    </a>
                                    <small class="text-muted">
                                        {{ format_date(c.created_at) }}
                                    </small>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-muted">
                            Aucun dossier gagnÃ©.
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- ================= PERDUS ================= -->
        <div class="col-12 col-lg-4">
            <div class="card h-100">
                <div class="card-header fw-bold">
                    ğŸ”´ Perdus ({{ perdus|length }})
                </div>
                <div class="card-body">
                    {% if perdus %}
                        <ul class="list-group list-group-flush">
                            {% for c in perdus %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <a href="{{ url_for('client_detail', client_id=c.id) }}">
                                        {{ c.name }}
                                    </a>
                                    <small class="text-muted">
                                        {{ format_date(c.created_at) }}
                                    </small>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-muted">
                            Aucun dossier perdu.
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}
