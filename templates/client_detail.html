{% extends "base.html" %}
{% block content %}

<h2 class="mb-3">{{ client.name }}</h2>

<div class="row">
    <div class="col-md-6">

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary text-white">
                Informations client
            </div>
            <div class="card-body">

                <p><strong>Email :</strong> {{ client.email }}</p>
                <p><strong>Téléphone :</strong> {{ client.phone }}</p>
                <p><strong>Adresse :</strong> {{ client.address }}</p>
                <p><strong>Commercial :</strong> {{ client.commercial }}</p>
                <p><strong>Status :</strong>
                    <span class="badge bg-primary">{{ client.status }}</span>
                </p>
                <p><strong>Notes :</strong><br>{{ client.notes }}</p>

                <a href="{{ url_for('edit_client', client_id=client.id) }}" class="btn btn-secondary mt-3">
                    <i class="bi bi-pencil"></i> Modifier
                </a>

            </div>
        </div>

    </div>

    <!-- DOCUMENTS CLIENT -->
    <div class="col-md-6">

        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                Documents du client
            </div>
            <div class="card-body">

                <!-- Upload -->
                <form method="POST" action="{{ url_for('client_upload_document', client_id=client.id) }}" enctype="multipart/form-data" class="mb-3">
                    <div class="input-group">
                        <input type="file" name="file" class="form-control" required>
                        <button class="btn btn-primary"><i class="bi bi-upload"></i></button>
                    </div>
                </form>

                {% if documents %}
                <ul class="list-group">
                    {% for d in documents %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">

                        <div>
                            <i class="bi bi-file-earmark"></i>
                            <a href="{{ d.url }}" target="_blank">{{ d.nom }}</a>
                        </div>

                        <form method="POST"
                            action="{{ url_for('client_delete_document', client_id=client.id, key=d.nom) }}"
                            onsubmit="return confirm('Supprimer ce document ?');">
                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                        </form>

                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-muted">Aucun document.</p>
                {% endif %}

            </div>
        </div>

    </div>
</div>

{% endblock %}
