<div class="card p-3 mb-4">
    <h5 class="mb-3">Demande de cotation</h5>

    <form method="POST"
          action="{{ url_for('create_cotation', client_id=client.id) }}">

        <div class="row g-3">

            <div class="col-md-6">
                <label>Date de négociation</label>
                <input type="date" name="date_negociation" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Type d’énergie</label>
                <select name="energie_type" class="form-control">
                    <option value="">—</option>
                    <option value="gaz">Gaz</option>
                    <option value="electricite">Électricité</option>
                </select>
            </div>

            <div class="col-md-6">
                <label>Nom de l’entreprise</label>
                <input name="entreprise_nom" class="form-control">
            </div>

            <div class="col-md-6">
                <label>SIRET</label>
                <input name="siret" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Nom du signataire</label>
                <input name="signataire_nom" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Téléphone</label>
                <input name="signataire_tel" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Email</label>
                <input type="email" name="signataire_email" class="form-control">
            </div>

            <div class="col-md-6">
                <label>PDL / PCE</label>
                <input name="pdl_pce" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Fournisseur actuel</label>
                <input name="fournisseur_actuel" class="form-control">
            </div>

            <div class="col-md-6">
                <label>Date d’échéance du contrat</label>
                <input type="date" name="date_echeance" class="form-control">
            </div>

            <div class="col-12">
                <label>Commentaire</label>
                <textarea name="commentaire"
                          class="form-control"
                          rows="3"></textarea>
            </div>

        </div>

        <button type="submit" class="btn btn-primary mt-4">
            Enregistrer la demande de cotation
        </button>
    </form>
</div>
<div class="card p-3">
    <h5 class="mb-3">Demandes de cotation</h5>

    {% for c in cotations %}
    <div class="border rounded p-3 mb-3">

        <strong>{{ c.entreprise_nom or client.name }}</strong>

        <div class="small text-muted mb-2">
            {{ "Gaz" if c.energie_type == "gaz"
               else "Électricité" if c.energie_type == "electricite"
               else "—" }}
            — Échéance : {{ c.date_echeance or "—" }}
        </div>

        <ul class="small mb-2">
            <li>Date de négociation : {{ c.date_negociation or "—" }}</li>
            <li>Signataire : {{ c.signataire_nom or "—" }}</li>
            <li>Email : {{ c.signataire_email or "—" }}</li>
            <li>Téléphone : {{ c.signataire_tel or "—" }}</li>
            <li>SIRET : {{ c.siret or "—" }}</li>
            <li>PDL / PCE : {{ c.pdl_pce or "—" }}</li>
            <li>Fournisseur actuel : {{ c.fournisseur_actuel or "—" }}</li>
        </ul>

        {% if c.commentaire %}
        <div class="fst-italic small">
            “{{ c.commentaire }}”
        </div>
        {% endif %}
    </div>
    {% else %}
    <p class="text-muted">Aucune demande de cotation.</p>
    {% endfor %}
</div>
