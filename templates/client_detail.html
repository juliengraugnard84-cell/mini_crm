{% extends "base.html" %}
{% block title %}Client{% endblock %}

{% block content %}

<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
    <h1>{{ client.name }}</h1>

    <div style="display:flex;gap:8px;">
        <a href="{{ url_for('edit_client', client_id=client.id) }}" class="btn btn-primary">
            Modifier
        </a>
        <form method="POST" action="{{ url_for('delete_client', client_id=client.id) }}"
              onsubmit="return confirm('Supprimer ce client ?');">
            <button class="btn btn-danger">Supprimer</button>
        </form>
    </div>
</div>

<div class="card">

    <h5>Informations</h5>

    <p><strong>Email :</strong> {{ client.email or "—" }}</p>
    <p><strong>Téléphone :</strong> {{ client.phone or "—" }}</p>
    <p><strong>Adresse :</strong> {{ client.address or "—" }}</p>
    <p><strong>Commercial :</strong> {{ client.commercial or "—" }}</p>

    {% if client.notes %}
    <p><strong>Notes :</strong><br>{{ client.notes }}</p>
    {% endif %}

</div>

<div class="card">

    <h5>Cotations</h5>

    {% if cotations %}
        <ul class="list-group">
            {% for c in cotations %}
            <li class="list-group-item">
                <strong>{{ c.energie_type or "—" }}</strong><br>
                <small class="text-muted">
                    Fournisseur : {{ c.fournisseur_actuel or "—" }} · Échéance : {{ c.date_echeance or "—" }}
                </small>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">Aucune cotation.</p>
    {% endif %}

</div>

{% endblock %}
